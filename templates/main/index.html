{% extends 'layouts/app.html' %}
{% load i18n %}
{% load checkliked %}
{% load static %}
{% block title %}
{% trans "SILKWAY –•–∞–ª—ã“õ–∞—Ä–∞–ª—ã“õ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ñ" %}
{% endblock %}
{% block content %}

            
<div class="swiper-container">
    <!-- Additional required wrapper -->
    <div class="swiper-wrapper">
      <!-- Slides -->
      <div class="swiper-slide bg">
            <img class="swiper-slide__img" src="{% static 'img/2.jpg' %}" alt="">
            <div class="swiper-slide__text">
                <div class="container">
                    <h3> {% translate "SILKWAY –•–∞–ª—ã“õ–∞—Ä–∞–ª—ã“õ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ñ 1992" %}</h3>
                    <h2 class="mt-1">{% trans '–ë–æ–ª–∞—à–∞“õ –º–∞–º–∞–Ω–¥–∞—Ä“ì–∞ –ª–∞–π—ã“õ—Ç—ã –±—ñ–ª—ñ–º –±–µ—Ä—É' %}</h2>
                    <!-- <h2 class="mt-1">–î–æ—Å—Ç–æ–π–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—É–¥—É—â–∏—Ö –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤</h2> -->
                    <div class="mt-3">
                        <a class="btn" href="{% url 'facult' %}">{% trans '–ë—ñ–∑–¥—ñ“£ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—Ç–µ—Ä' %}</a>
                        <a class="btn btn--dark-blue" href="">{% trans '–ë–∞–π–ª–∞–Ω—ã—Å' %}</a>
                    </div>     
                </div>
            </div>
      </div>
      <div class="swiper-slide bg">
        <img class="swiper-slide__img" src="{% static 'img/1.jpeg' %}" alt="">
        
        <div class="swiper-slide__text">
            <div class="container">
                <h3>{% trans '–ë–æ–ª–∞—à–∞“õ –º–∞–º–∞–Ω–¥–∞—Ä“ì–∞ –ª–∞–π—ã“õ—Ç—ã –±—ñ–ª—ñ–º –±–µ—Ä—É' %}</h3>
                <h2 class="mt-1">{% trans 'SILKWAY –•–∞–ª—ã“õ–∞—Ä–∞–ª—ã“õ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ñ 1992 –∂' %}</h2>
                <div class="mt-3">
                    <a class="btn" href="">{% trans '–ë—ñ–∑–¥—ñ“£ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—Ç–µ—Ä' %}</a>
                    <a class="btn btn--dark-blue" href="">{% trans '–ë–∞–π–ª–∞–Ω—ã—Å' %}</a>
                </div>     
            </div>
        </div>
  </div>
      
    </div>
    
  
    <!-- If we need navigation buttons -->
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
  
    <!-- If we need scrollbar -->
    
  </div>

<section class="box-area">
    <div class="container">
        <div class="box-area__row">
            <a class="box-area__item__link" href="{% url 'opView' %}">
                <article class="box-area__item">
                <div class="box-area__icon">
                    <i style="color:rgb(255, 111, 111); font-size: 6rem;" class="fad fa-chevron-double-up"></i>
                </div>
                <div class="box-area__text">
                    <h3 class="box-area__title">{% trans '–¢–∞–Ω—ã–º–∞–ª –û–ü' %}</h3>
                    <p class="box-area__description">{% trans '“Æ–∑–¥—ñ–∫ –±—ñ–ª—ñ–º –±–µ—Ä—É –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—Ä—ã' %}</p>
                </div>
            </article>
            </a>
            <a class="box-area__item__link" href="{% url 'libindex' %}">
                 <article class="box-area__item">
                    <div class="box-area__icon">
                        <i style="color:rgb(132, 71, 156); font-size: 6rem;" class="fad fa-book"></i>
                    </div>
                    <div class="box-area__text">
                        <h3 class="box-area__title">{% trans '–ó–∞–º–∞–Ω–∞—É–∏ –∫—ñ—Ç–∞–ø—Ö–∞–Ω–∞' %}</h3>
                        <p class="box-area__description">{% trans '“Æ–∑–¥—ñ–∫ –±—ñ–ª—ñ–º –±–µ—Ä—É –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—Ä—ã' %}</p>
                    </div>
                </article>
            </a>
            <a class="box-area__item__link" href="">
                <article class="box-area__item">
                    <div class="box-area__icon">
                        <i  style="color:rgb(44, 151, 234); font-size: 6rem;" class="fad fa-file-certificate"></i>
                    </div>
                    <div class="box-area__text">
                        <h3 class="box-area__title">{% trans '–ë—ñ–ª—ñ–∫—Ç—ñ –º–∞–º–∞–Ω–¥–∞—Ä' %}</h3>
                        <p class="box-area__description">{% trans '“Æ–∑–¥—ñ–∫ –±—ñ–ª—ñ–º –±–µ—Ä—É –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—Ä—ã' %}</p>
                    </div>
                </article>
            </a>


        </div>
    </div>
</section>

<section class="about-us mt-7">
    <div class="container">
        <div class="about-us__row">
            <div class="about-us__img">
                <img src="{% static '/img/swiumainpage.jpg' %}" alt="">
                <img class="about-us-a" src="{% static '/img/img2.jpg' %}" alt="">
                <a class="about-us-btnn" href="https://www.youtube.com/watch?v=_p-EjQdhGIU"><i class="orange fas about-us-svg fa-play"></i></a>
            </div>
            <div class="about-us__text">
                <h2 class="about-us__title">
                    {% trans 'SILKWAY –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ñ–Ω —Ç–∞“£–¥–∞—É–¥—ã“£ 4 —Å–µ–±–µ–±—ñ ü§©üåè —Å–æ–Ω–¥—ã“õ—Ç–∞–Ω –∫–µ—Ç—Ç—ñ–∫üöÄ' %}
                </h2>
                <p class="about-us__desciption">
                   {% trans '1. –ë—ñ–∑ –∞–∫–∫—Ä–µ–¥–∏—Ç—Ç–µ–ª–≥–µ–Ω –∂–æ“ì–∞—Ä—ã –æ“õ—É –æ—Ä–Ω—ã–º—ã–∑' %} <br>
                   {% trans '2. –ë—ñ–∑–¥–µ - –±—ñ–ª—ñ–º –≥—Ä–∞–Ω—Ç—Ç–∞—Ä—ã' %}<br>
                   {% trans '3. –ë–∞–π –º–∞—Ç–µ—Ä–∏–∞–ª–¥—ã“õ-—Ç–µ—Ö–Ω–∏–∫–∞–ª—ã“õ –±–∞–∑–∞' %}<br>
                   {% trans '4. –ë—ñ–∑ —Ä–µ—Å–ø—É–±–ª–∏–∫–∞–º—ã–∑–¥–∞“ì—ã –µ“£ “Ø–∑–¥—ñ–∫ –ø–µ–¥–∞–≥–æ–≥–∏–∫–∞–ª—ã“õ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–ø—ñ–∑.' %}  <br>
                </p>
                <div class="about-us__box">
                    <div class="about-us__box-item">
                        <h2 class="about-us__number orange">
                            9%
                        </h2>
                        <p class="about-us__box-text">{% trans '–ê–∫–∞–¥–µ–º–∏—è–ª—ã“õ —à–µ—Ç–µ–ª–¥—ñ–∫ —Å—Ç—É–¥–µ–Ω—Ç—Ç–µ—Ä' %}</p>
                    </div>
                    <div class="about-us__box-item">
                        <h2 class="about-us__number purple">
                            44+
                        </h2>
                        <p class="about-us__box-text">{% trans '–ë—ñ–ª—ñ–º –±–µ—Ä—É –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—Ä—ã' %}</p>
                    </div>
                    <div class="about-us__box-item">
                        <h2 class="about-us__number blue">
                            4
                        </h2>
                        <p class="about-us__box-text">{% trans 'NR –ø–µ–¥–∞–≥–æ–≥–∏–∫–∞–ª—ã“õ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Ç–µ—Ä—ñ–Ω–¥–µ–≥—ñ –æ—Ä–Ω—ã' %}</p>
                    </div>
                </div>
                <a class="btn about-us__btn mt-5" href="">{% trans '–¢–æ–ª—ã“ì—ã—Ä–∞“õ' %}</a>
            </div>
        </div>
    </div>
    
</section>

<section class="testimonial-area">
    <div class="container">
        <div class="testimonial-area__row">
            <h2 class="testimonial-area__title">{% trans '–ë—ñ–∑–¥—ñ“£ –º–µ–Ω–µ–¥–∂–µ—Ä–ª–µ—Ä –∫–µ“£–µ—Å –±–µ—Ä–µ–¥—ñ' %}</h2>
            
                <!-- Slider main container -->
                <div class="swiper-container2">
                    <!-- Additional required wrapper -->
                    <div class="swiper-wrapper">
                    <!-- Slides -->
                    {% for quote in quotes %}
                    <div class="swiper-slide">           
                        <div class="testimonial-area__item">
                            <div class="testimonial-area__text">
                                <h3>{{ quote.title }}</h3>
                                <p>{{ quote.description }}</p>
                            </div>
                            <div class="testimonial-area__writer">
                                <img src="{{ quote.img.url }}" alt="">
                                <div>
                                    <h2>{{quote.author}}</h2>
                            
                                </div>    
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    

                    </div>
                    <!-- If we need pagination -->
                    <div class="swiper-pagination"></div>

                </div>
         
            
        </div>
    </div>
</section>

<section class="news-area">
    <div class="container">
        <div class="news-area__title">
            <h2>{% trans 'SILKWAY —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ñ–Ω—ñ“£ —Å–æ“£“ì—ã –∂–∞“£–∞–ª—ã“õ—Ç–∞—Ä—ã' %}</h2>
        </div>
        <div class="news">
            {% for post in posts %}
            <div class="news__item">
                {% if post.post_img.first %}
                    <div class="news__img">
                        <img src="{{post.post_img.first.img.url}}" alt="">
                    </div>
                    {% else %}
                    <div class="news__img">
                        <img src="{% static 'img/unnamedd.png' %}" alt="">
                    </div>
                    {% endif %}
                <div class="news__content">
                    <div class="news__header">
                        <span>{{ post.created_at }}</span>
                        <h3 class="news__title"><a class="news__title" href="{% url 'postDetailView' post.slug %}">{{ post.title}}</a></h3>
                    </div>
                    <div class="news__body">
                        <div>{% autoescape off %}{{post.description}}{% endautoescape %}</div>
                    </div>
                    <div class="news__footer">
                        <div class="news__footer-item">
                            <i class="far fa-user"></i>
                            <span>{{post.author}}</span>
                        </div>
                        
                        <!-- <div class="comment news__footer-item">
                            <input type="hidden" value="{{post.slug}}">
                                <i class="none-click far fa-comments"></i>
                                <input type="hidden" value="{{post.slug}}">
                                <span class="none-click">{{ post.post_com.count }}</span>
                            
                            <div class="news__comment hide">
                                <input class="comment_title review__form" placeholder="–ü–∏—à–∏—Ç–µ —Å–≤–æ–π –∫–æ–º–º–µ–Ω—Ç">
                                <input value="{{post.slug}}" class="comment_url" type="hidden">
                                <button class="btn comment_btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                                <ul class="lastComments">
                                    
                                </ul>
                            </div>
                        </div> -->
                        <div class="news__footer-item ">       
                                <input type="hidden" value="{{post.slug}}">
                                <button class="like_btn {% check post.id request.session.session_key %}" type="submit"><i class="none-click far fa-heart"></i></button>
                            <span class="none-click">{{ post.likes.count }}</span>
                        </div>
                    </div>
                </div>
            </div>
           
            {% endfor %}
           
        </div>
        <a style="text-align: center; display: block; margin-top: 75px;" class="btn" href="{% url 'postListView' 1 %}">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏</a>
    </div>
</section>
<section class="news-area">
    <div class="container">
        <div class="news-area__title">
            <h2>{% trans 'SILKWAY —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ñ–Ω—ñ“£ —Å–æ“£“ì—ã —Ö–∞–±–∞—Ä–ª–∞–Ω–¥—ã—Ä—É–ª–∞—Ä—ã' %}</h2>
        </div>
        <div class="news">
            {% for post in ads %}
            <div class="news__item">
                {% if post.post_img %}
                <div class="news__img">
                    <img src="{{post.post_img.first.img.url}}" alt="">
                </div>
                {% else %}
                <div class="news__img">
                    <img src="{% static 'img/unnamedd.png' %}" alt="">
                </div>
                {% endif %}
                <div class="news__content">
                    <div class="news__header">
                        <span>{{ post.created_at }}</span>
                        <h3 class="news__title"><a class="news__title" href="{% url 'postDetailView' post.slug %}">{{ post.title}}</a></h3>
                    </div>
                    <div class="news__body">
                        <div>{% autoescape off %}{{post.description}}{% endautoescape %}</div>
                    </div>
                    <div class="news__footer">
                        <div class="news__footer-item">
                            <i class="far fa-user"></i>
                            <span>{{post.author}}</span>
                        </div>

                        <!-- <div class="comment news__footer-item">
                            <input type="hidden" value="{{post.slug}}">
                                <i class="none-click far fa-comments"></i>
                                <input type="hidden" value="{{post.slug}}">
                                <span class="none-click">{{ post.post_com.count }}</span>

                            <div class="news__comment hide">
                                <input class="comment_title review__form" placeholder="–ü–∏—à–∏—Ç–µ —Å–≤–æ–π –∫–æ–º–º–µ–Ω—Ç">
                                <input value="{{post.slug}}" class="comment_url" type="hidden">
                                <button class="btn comment_btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                                <ul class="lastComments">

                                </ul>
                            </div>
                        </div> -->
                        <div class="news__footer-item ">
                                <input type="hidden" value="{{post.slug}}">
                                <button class="like_btn" type="submit"><i class="none-click red far fa-heart"></i></button>
                            <span class="none-click">{{ post.likes.count }}</span>
                        </div>
                    </div>
                </div>
            </div>

            {% endfor %}

        </div>
        <a style="text-align: center; display: block; margin-top: 75px;" class="btn" href="{% url 'postListView' 2 %}">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</a>
    </div>
</section>
<script>
    // const mainsiteurl = "127.0.0.1:8000"
    '{% get_current_language as LANGUAGE_CODE %}'
    const likeBtn = document.querySelectorAll('.like_btn');


    async function liker(data){
         let liked = await fetch("creative/post/like",{
            method:"POST",
            headers: {
                        "Content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                        "X-CSRFToken": "{{csrf_token}}"
            },
            body: JSON.stringify(data)
        })
        return await liked
    }

    async function likeCountf(url){
        let count = await  fetch("creative/post/likecount/"+url);
        return await count.json();
    }
    likeBtn.forEach(like=>{
        like.addEventListener('click',btn=>{
             btn = btn.target;

             if (btn.classList.contains('like_btn')){
                 let url = btn.previousElementSibling.value;
                 let likeCount = btn.nextElementSibling;
                 let myData = {
                    'slug':url,
                    'session_key':"{{request.session.session_key}}"
                 }
                 liker(myData)
                 .then(render())

                 function render(){
                     likeCountf(url)
                     .then(data => {
                         if (btn.classList.contains('active')){
                             btn.classList.remove('active');
                             likeCount.innerHTML = parseInt(likeCount.innerHTML)-1;
                         }else{
                             btn.classList.add('active');
                             likeCount.innerHTML = parseInt(likeCount.innerHTML)+1;
                         }

                     })
                 }
             }

        })
    });
</script>
{% endblock %}