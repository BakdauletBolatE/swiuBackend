{% extends 'layouts/app.html' %}
{% load i18n %} 
{% load static %}
{% block title %}
{% trans "SILKWAY –•–∞–ª—ã“õ–∞—Ä–∞–ª—ã“õ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ñ" %}
{% endblock %}
{% block content %}

            
<div class="swiper-container">
    <!-- Additional required wrapper -->
    <div class="swiper-wrapper">
      <!-- Slides -->
      <div class="swiper-slide bg">
            <img class="swiper-slide__img" src="{% static 'img/2.jpg' %}" alt="">
            <div class="swiper-slide__text">
                <div class="container">
                    <h3> {% translate "SILKWAY –•–∞–ª—ã“õ–∞—Ä–∞–ª—ã“õ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ñ 1992" %}</h3>
                    <h2 class="mt-1">{% trans '–ë–æ–ª–∞—à–∞“õ –º–∞–º–∞–Ω–¥–∞—Ä“ì–∞ –ª–∞–π—ã“õ—Ç—ã –±—ñ–ª—ñ–º –±–µ—Ä—É' %}</h2>
                    <!-- <h2 class="mt-1">–î–æ—Å—Ç–æ–π–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—É–¥—É—â–∏—Ö –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤</h2> -->
                    <div class="mt-3">
                        <a class="btn" href="">{% trans '–ë—ñ–∑–¥—ñ“£ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—Ç–µ—Ä' %}</a>
                        <a class="btn btn--dark-blue" href="">{% trans '–ë–∞–π–ª–∞–Ω—ã—Å' %}</a>
                    </div>     
                </div>
            </div>
      </div>
      <div class="swiper-slide bg">
        <img class="swiper-slide__img" src="{% static 'img/1.jpeg' %}" alt="">
        
        <div class="swiper-slide__text">
            <div class="container">
                <h3>{% trans '–ë–æ–ª–∞—à–∞“õ –º–∞–º–∞–Ω–¥–∞—Ä“ì–∞ –ª–∞–π—ã“õ—Ç—ã –±—ñ–ª—ñ–º –±–µ—Ä—É' %}</h3>
                <h2 class="mt-1">{% trans 'SILKWAY –•–∞–ª—ã“õ–∞—Ä–∞–ª—ã“õ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ñ 1922 –∂' %}</h2>
                <div class="mt-3">
                    <a class="btn" href="">{% trans '–ë—ñ–∑–¥—ñ“£ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—Ç–µ—Ä' %}</a>
                    <a class="btn btn--dark-blue" href="">{% trans '–ë–∞–π–ª–∞–Ω—ã—Å' %}</a>
                </div>     
            </div>
        </div>
  </div>
      
    </div>
    
  
    <!-- If we need navigation buttons -->
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
  
    <!-- If we need scrollbar -->
    
  </div>

<section class="box-area">
    <div class="container">
        <div class="box-area__row">
            <article class="box-area__item">
                <div class="box-area__icon">
                    <i style="color:rgb(255, 111, 111); font-size: 6rem;" class="fad fa-chevron-double-up"></i>
                </div>
                <div class="box-area__text">
                    <h3 class="box-area__title">{% trans '–¢–∞–Ω—ã–º–∞–ª –û–ü' %}</h3>
                    <p class="box-area__description">{% trans '“Æ–∑–¥—ñ–∫ –±—ñ–ª—ñ–º –±–µ—Ä—É –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—Ä—ã' %}</p>
                </div>
            </article>
            <article class="box-area__item">
                <div class="box-area__icon">
                    <i style="color:rgb(132, 71, 156); font-size: 6rem;" class="fad fa-book"></i>
                </div>
                <div class="box-area__text">
                    <h3 class="box-area__title">{% trans '–ó–∞–º–∞–Ω–∞—É–∏ –∫—ñ—Ç–∞–ø—Ö–∞–Ω–∞' %}</h3>
                    <p class="box-area__description">{% trans '“Æ–∑–¥—ñ–∫ –±—ñ–ª—ñ–º –±–µ—Ä—É –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—Ä—ã' %}</p>
                </div>
            </article>
            <article class="box-area__item">
                <div class="box-area__icon">              
                    <i  style="color:rgb(44, 151, 234); font-size: 6rem;" class="fad fa-file-certificate"></i>
                </div>
                <div class="box-area__text">
                    <h3 class="box-area__title">{% trans '–ë—ñ–ª—ñ–∫—Ç—ñ –º–∞–º–∞–Ω–¥–∞—Ä' %}</h3>
                    <p class="box-area__description">{% trans '“Æ–∑–¥—ñ–∫ –±—ñ–ª—ñ–º –±–µ—Ä—É –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—Ä—ã' %}</p>
                </div>
            </article>
        </div>
    </div>
</section>

<section class="about-us mt-7">
    <div class="container">
        <div class="about-us__row">
            <div class="about-us__img">
                <img src="{% static '/img/swiumainpage.jpg' %}" alt="">
                <img class="about-us-a" src="{% static '/img/img2.jpg' %}" alt="">
                <a class="about-us-btnn" href="https://www.youtube.com/watch?v=_p-EjQdhGIU"><i class="orange fas about-us-svg fa-play"></i></a>
            </div>
            <div class="about-us__text">
                <h2 class="about-us__title">
                    {% trans 'S SILKWAY –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ñ–Ω —Ç–∞“£–¥–∞—É–¥—ã“£ 5 —Å–µ–±–µ–±—ñ ü§©üåè —Å–æ–Ω–¥—ã“õ—Ç–∞–Ω –∫–µ—Ç—Ç—ñ–∫üöÄ' %}
                </h2>
                <p class="about-us__desciption">
                   {% trans '1. –ë—ñ–∑ –∞–∫–∫—Ä–µ–¥–∏—Ç—Ç–µ–ª–≥–µ–Ω –∂–æ“ì–∞—Ä—ã –æ“õ—É –æ—Ä–Ω—ã–º—ã–∑' %} <br>
                   {% trans '1. –ë—ñ–∑ –∞–∫–∫—Ä–µ–¥–∏—Ç—Ç–µ–ª–≥–µ–Ω –∂–æ“ì–∞—Ä—ã –æ“õ—É –æ—Ä–Ω—ã–º—ã–∑' %} <br>
                   {% trans '3. –ë—ñ–∑–¥–µ - –±—ñ–ª—ñ–º –≥—Ä–∞–Ω—Ç—Ç–∞—Ä—ã' %}<br>
                   {% trans '4. –ë–∞–π –º–∞—Ç–µ—Ä–∏–∞–ª–¥—ã“õ-—Ç–µ—Ö–Ω–∏–∫–∞–ª—ã“õ –±–∞–∑–∞' %}<br>
                   {% trans '5. –ë—ñ–∑ —Ä–µ—Å–ø—É–±–ª–∏–∫–∞–º—ã–∑–¥–∞“ì—ã –µ“£ “Ø–∑–¥—ñ–∫ –ø–µ–¥–∞–≥–æ–≥–∏–∫–∞–ª—ã“õ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–ø—ñ–∑.' %}  <br>
                </p>
                <div class="about-us__box">
                    <div class="about-us__box-item">
                        <h2 class="about-us__number orange">
                            9%
                        </h2>
                        <p class="about-us__box-text">{% trans '–ê–∫–∞–¥–µ–º–∏—è–ª—ã“õ —à–µ—Ç–µ–ª–¥—ñ–∫ —Å—Ç—É–¥–µ–Ω—Ç—Ç–µ—Ä' %}</p>
                    </div>
                    <div class="about-us__box-item">
                        <h2 class="about-us__number purple">
                            44+
                        </h2>
                        <p class="about-us__box-text">{% trans '–ë—ñ–ª—ñ–º –±–µ—Ä—É –±–∞“ì–¥–∞—Ä–ª–∞–º–∞–ª–∞—Ä—ã' %}</p>
                    </div>
                    <div class="about-us__box-item">
                        <h2 class="about-us__number blue">
                            4
                        </h2>
                        <p class="about-us__box-text">{% trans 'NR –ø–µ–¥–∞–≥–æ–≥–∏–∫–∞–ª—ã“õ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Ç–µ—Ä—ñ–Ω–¥–µ–≥—ñ –æ—Ä–Ω—ã' %}</p>
                    </div>
                </div>
                <a class="btn about-us__btn mt-5" href="">{% trans '–¢–æ–ª—ã“ì—ã—Ä–∞“õ' %}</a>
            </div>
        </div>
    </div>
    
</section>

<section class="testimonial-area">
    <div class="container">
        <div class="testimonial-area__row">
            <h2 class="testimonial-area__title">{% trans '–ë—ñ–∑–¥—ñ“£ –º–µ–Ω–µ–¥–∂–µ—Ä–ª–µ—Ä –∫–µ“£–µ—Å –±–µ—Ä–µ–¥—ñ' %}</h2>
            
                <!-- Slider main container -->
                <div class="swiper-container2">
                    <!-- Additional required wrapper -->
                    <div class="swiper-wrapper">
                    <!-- Slides -->
                    {% for quote in quotes %}
                    <div class="swiper-slide">           
                        <div class="testimonial-area__item">
                            <div class="testimonial-area__text">
                                <h3>{{ quote.title }}</h3>
                                <p>{{ quote.description }}</p>
                            </div>
                            <div class="testimonial-area__writer">
                                <img src="{{ quote.img.url }}" alt="">
                                <div>
                                    <h2>{{quote.author}}</h2>
                            
                                </div>    
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    

                    </div>
                    <!-- If we need pagination -->
                    <div class="swiper-pagination"></div>

                </div>
         
            
        </div>
    </div>
</section>

<section class="news-area">
    <div class="container">
        <div class="news-area__title">
            <h2>{% trans 'SILKWAY —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ñ–Ω—ñ“£ —Å–æ“£“ì—ã –∂–∞“£–∞–ª—ã“õ—Ç–∞—Ä—ã' %}</h2>
        </div>
        <div class="news">
            {% for post in posts %}
            <div class="news__item">
                <div class="news__img">
                    <img src="{{post.post_img.first.img.url}}" alt="">
                </div>
                <div class="news__content">
                    <div class="news__header">
                        <span>{{ post.created_at }}</span>
                        <h3 class="news__title"><a class="news__title" href="{% url 'postDetailView' post.slug %}">{{ post.title}}</a></h3>
                    </div>
                    <div class="news__body">
                        <p>{{post.description}}</p>
                    </div>
                    <div class="news__footer">
                        <div class="news__footer-item">
                            <i class="far fa-user"></i>
                            <span>{{post.author}}</span>
                        </div>
                        
                        <div class="comment news__footer-item">
                            <input type="hidden" value="{{post.slug}}">
                                <i class="none-click far fa-comments"></i>
                                <input type="hidden" value="{{post.slug}}">
                                <span class="none-click">{{ post.post_com.count }}</span>
                            
                            <div class="news__comment hide">
                                <input class="comment_title review__form" placeholder="–ü–∏—à–∏—Ç–µ —Å–≤–æ–π –∫–æ–º–º–µ–Ω—Ç">
                                <input value="{{post.slug}}" class="comment_url" type="hidden">
                                <button class="btn comment_btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                                <ul class="lastComments">
                                    
                                </ul>
                            </div>
                        </div>
                        <div class="news__footer-item ">       
                                <input type="hidden" value="{{post.slug}}">
                                <button class="like_btn" type="submit"><i class="none-click far fa-heart"></i></button>            
                            <span class="none-click">{{ post.likes.count }}</span>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
<script>
    // const mainsiteurl = "127.0.0.1:8000"
    '{% get_current_language as LANGUAGE_CODE %}'
    const likeBtn = document.querySelectorAll('.like_btn');
    likeBtn.forEach(e=>{
        e.addEventListener('click',btn=>{
           
            btn = btn.target;
            if (btn.classList.contains('like_btn')){
                var url = btn.previousElementSibling.value;
                var likeCount = btn.nextElementSibling;
                let myData = {
                    'slug':url,
                    'session_key':"{{request.session.session_key}}"
                }
                fetch("creative/post/like",{
                    method:"POST",
                    headers: {
                        "Content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                        "X-CSRFToken": "{{csrf_token}}"
                    },
                    body: JSON.stringify(myData)
                })
                .then(function (data) {
                console.log('Request succeeded with JSON response', data);
                })
                .then(view)
                .catch(function (error) {
                    console.log('Request failed', error);
                });
                }
                function view(){
                    fetch("creative/post/likecount/"+url)
                    .then(response => response.json())
                    .then(likes => likesf(likes))

                    function likesf(datalike){
                        const dataliker = datalike;
                        likeCount.innerHTML = dataliker.like
                    }

                }

                
        });
    });
    const comment = document.querySelectorAll('.comment')
    comment.forEach(com=>{
        com.addEventListener('click',(com)=>{
            com = com.target;
            if (com.classList.contains('comment')){
                changer = com.lastElementChild;
                changer.classList.toggle('hide');
                url = com.firstElementChild.value;
                lastComments = changer.lastElementChild;
                fetch('creative/comments/'+url)
                .then(response => response.json())
                .then(commits => view(commits))

                function view(data){
                    data = data.comments;
                    lastComments.innerHTML = "";
                    data.forEach(e=>{
                        li = document.createElement('li');
                        li.innerHTML = e.author+": "+e.description;
                        lastComments.append(li)
                    });
                    
                }
               
            }
        })
    })

    

    const btn = document.querySelectorAll('.comment_btn')

    btn.forEach((e)=>{
        e.addEventListener('click',(com)=>{
            com = com.target
            let lastComments = com.nextElementSibling;
            let url = com.previousElementSibling.value;
            let count = com.parentElement.previousElementSibling;
            let desciption = com.previousElementSibling.previousElementSibling.value;
            console.log(count);

            let myData = {
                'slug': url,
                'desciption':desciption
            }

            fetch('creative/comments/add', {
            method: 'post',
            credentials: 'same-origin', 
            headers: {
                "Content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                "X-CSRFToken": "{{csrf_token}}"
            },
            body: JSON.stringify(myData)
            })
            .then(function (data) {
                console.log('Request succeeded with JSON response', data);
            })
            .then(view)
            .catch(function (error) {
                console.log('Request failed', error);
            });

            function view(){
                li = document.createElement('li');
                li.innerHTML = "{{request.user.username}}"+": "+myData.desciption;
                lastComments.append(li);
                desciption.value = "";
                a = parseInt(count.innerHTML);
                count.innerHTML = a + 1;
            }

        })
    });





  

//   fetch('http://127.0.0.1:8000/creative/comments/add', {
//     method: 'post',
//     credentials: 'same-origin', 
//     headers: {
//       "Content-type": "application/x-www-form-urlencoded; charset=UTF-8",
//       "X-CSRFToken": "{{csrf_token}}"
//     },
//     body: JSON.stringify(myData)
//   })
//   .then(function (data) {
//     console.log('Request succeeded with JSON response', data);
//   })
//   .catch(function (error) {
//     console.log('Request failed', error);
//   });
//         fetch('http://127.0.0.1:8000/creative/comments/')
//   .then(response => response.json())
//   .then(commits => console.log(commits));
</script>
{% endblock %}